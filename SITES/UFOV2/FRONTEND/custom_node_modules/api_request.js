exports.apirequest={ API_Query_Get, API_Query_Post };
var querystring = require('querystring');
const { exec } = require("child_process");

var mysql = require('mysql');
var db_connection = mysql.createConnection({
    host: "localhost",
    user: "root",
    password: "",
    database: "ufo"
  });
  db_connection.connect(function(err) {
    if (err) throw err;
    console.log("Connected!");
});









 //https://nodejs.dev/making-http-requests-with-nodejs
function API_Query_Post(req, res) {
  
}

function API_Query_Get(req, res) {
  const myURL = new URL(req.url.toString(), 'http://localhost:8081/');
  console.log(myURL.searchParams.get('command'));
  var cmd=myURL.searchParams.get('command');
      var sql_query = "SELECT * FROM `person` WHERE 1";
      db_connection.query(sql_query, function (err, result) {
        if (err) {throw err;}
        else
        {
          console.log(result);
          //var json=result;
          res.writeHead(200, { 'Content-Type': 'text/javascript' });
          res.write(JSON.stringify(result));
          res.end();
        }
   });
}
/*
db_connection.end(function(err){
    console.log("Db Connectin Close");
  })
  */